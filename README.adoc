= agrirouter-postman-tools
:imagesdir: assets/images
:toc:
:toc-title:
:toclevels: 4

[abstract]
== Abstract
image::agrirouter.svg[agrirouter]

The agrirouter is a universal data exchange platform for farmers and agricultural contractors that makes it possible to connect machinery and agricultural software, regardless of vendor or manufacturer. Agrirouter does not save data; it transfers data.
As a universal data exchange platform, agrirouter fills a gap on the way to Farming 4.0. Its underlying concept unites cross-vendor and discrimination-free data transfer. You retain full control over your data. Even data exchange with service providers (e.g. agricultural contractors) and other partners is uncomplicated: Data are very rapidly transferred via the online connection, and if you wish, is intelligently connected to other datasets.



== The current project you are looking at
the agrirouter postman tools can be used to onboard endpoints to check simulate the onboarding.


== Postman Collection

The Postman Collection includes request templates for onboarding, message sending to the inbox and message requesting from the outbox.

=== Setup

* Get Postman: https://www.getpostman.com/ 
* Import the postman collection from folder "postman" (for further information see link:https://learning.getpostman.com/docs/postman/collections/data_formats[here] )

=== Usage

==== If you want to onboard a CU: 
* Receive a registration code through the agrirouter UI
* Open Request "Onboarding CU" and select Onboarding Request
* Enter your app information under "PreRequestScripts"
* Select Environment and send Request


==== If you want to onboard a farming software or a telemetry platform:
* Receive a registration code throught the authentication process
* Open Request Onboarding FMIS&Telemetry and select 01_GetSignature
* Enter your app information in the PreRequestScripts
* Setup and start the node server (see below)
* Send Request 

==== => Receive onboarded app credentials

== Node Server

The NodeJS Server is required to create an application Signature for the FMIS- and Telemetry onboarding process. 
it can be fund under signature-creator

=== Required Tools
* https://www.npmjs.com/
* https://nodejs.org 

=== Setup

* Open a console and navigate to the folder of the tool
* Run the following command: 
    npm install
    node index.js

== Adding a Certificate

For an SSL Secured communication, add the certificate delivered with the onboarding request:

1. Copy&paste ENCRYPTED PRIVATE KEY section to new file

2. Replace all \n with new lines.

3. Save both sections (ENCRYPTED PRIVATE KEY and CERTIFICATE) in separate files (e. g. DEVICE_MYEXTERNALID.key, DEVICE_MYEXTERNALID.crt)

4. Provide both in Postman Settings / Certificates, including the passphrase provided in the onboarding response.

++++
<p align="center">
 <img src="./assets/images/certificate.png" width="603px" height="152px"><br>
 <i>Adding the certificate in Postman</i>
</p>
++++


= Authorization Server
To create a TAN for Farming Software and Telemetry platforms, we provide a small example server tool in "./authorization-server"

== SETUP of your application

To make your application compatible with this tool, you need to setup the redirect-URL as "http://fuf.me:8080".

To make the tool runable, you will need nodejs and npm.

To setup the tool, you have to run
    npm install

in the folder of the tool.


